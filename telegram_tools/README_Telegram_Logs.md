# دليل استخدام نظام نقل السجلات عبر Telegram

## نظرة عامة
هذا النظام يسمح لك بنقل سجلات البرامج من جهاز آخر إلى هذا الجهاز عبر Telegram Bot.

## الملفات المطلوبة
- `send_logs_to_telegram.ahk` - للإرسال (استخدم على الجهاز الآخر)
- `get_logs_from_telegram.ahk` - للاستقبال (استخدم على هذا الجهاز)
- `test_telegram_logs.ahk` - لاختبار النظام
- `../settings.ini` - ملف الإعدادات (في المجلد الرئيسي)

## الإعداد

### 1. إنشاء Telegram Bot
1. ابحث عن `@BotFather` في Telegram
2. أرسل `/newbot`
3. اتبع التعليمات واحصل على Bot Token

### 2. الحصول على Chat ID
1. أرسل رسالة لبوتك
2. اذهب إلى: `https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates`
3. ابحث عن `"chat":{"id":` واحصل على الرقم

### 3. إضافة البيانات إلى settings.ini
أضف هذه الأسطر إلى ملف `settings.ini` في المجلد الرئيسي:
```ini
[Telegram]
bot_token=YOUR_BOT_TOKEN_HERE
chat_id=YOUR_CHAT_ID_HERE
```

## طريقة الاستخدام

### الخطوة 1: الاختبار
```
شغل: test_telegram_logs.ahk
```
- يتحقق من صحة الإعدادات
- يختبر الاتصال بـ Telegram
- ينشئ ملفات تجريبية للاختبار

### الخطوة 2: إرسال السجلات (على الجهاز المصدر)
```
شغل: send_logs_to_telegram.ahk
```
- يجمع جميع ملفات السجل
- يرسل معلومات النظام
- يرسل الملفات عبر Telegram
- يعرض تقرير بعدد الملفات المرسلة

### الخطوة 3: استقبال السجلات (على الجهاز المستهدف)
```
شغل: get_logs_from_telegram.ahk
```
- يبحث عن الرسائل الجديدة
- يحمل جميع الملفات المرسلة
- يحفظها في مجلد مؤرخ
- يفتح مجلد الملفات المحملة

## الملفات التي يتم نقلها

### ملفات أساسية
- `settings.ini` - إعدادات البرنامج
- `state_snapshot.ini` - حالة البرنامج
- `last_error.log` - سجل الأخطاء الأخير

### ملفات السجل
- جميع ملفات `.log` في المجلد الرئيسي
- جميع الملفات في مجلد `logs/` (إن وجد)
- جميع الملفات في مجلد `screenshots/` (إن وجد)

### معلومات إضافية
- معلومات النظام (اسم الكمبيوتر، المستخدم، إلخ)
- تاريخ ووقت الإرسال
- تقرير مفصل بالملفات المرسلة

## استكشاف الأخطاء

### مشاكل شائعة

#### 1. خطأ في إعدادات Telegram
**الأعراض**: رسالة "بيانات Telegram غير مكتملة"
**الحل**: 
- تأكد من وجود `BotToken` و `ChatId` في `settings.ini`
- تأكد من صحة القيم

#### 2. فشل الاتصال
**الأعراض**: "فشل الاتصال بـ Telegram"
**الحل**:
- تحقق من اتصال الإنترنت
- تأكد من صحة Bot Token
- جرب تشغيل سكريبت الاختبار

#### 3. عدم وجود ملفات للإرسال
**الأعراض**: "عدد الملفات المرسلة: 0"
**الحل**:
- تأكد من وجود ملفات السجل
- شغل البرنامج الأساسي أولاً لإنشاء السجلات

#### 4. فشل التحميل
**الأعراض**: "لم يتم العثور على ملفات للتحميل"
**الحل**:
- تأكد من إرسال الملفات أولاً
- تحقق من Chat ID
- جرب تشغيل سكريبت الإرسال مرة أخرى

## نصائح للاستخدام الأمثل

### 1. التوقيت
- أرسل السجلات بعد تشغيل البرنامج لفترة كافية
- لا تحمل السجلات فوراً بعد الإرسال (انتظر دقيقة)

### 2. الأمان
- لا تشارك Bot Token مع أحد
- استخدم Chat ID خاص بك فقط
- احذف الرسائل من Telegram بعد التحميل

### 3. التنظيم
- احفظ السجلات المحملة في مجلدات منفصلة
- أضف تواريخ للمجلدات للتمييز
- احتفظ بنسخ احتياطية من السجلات المهمة

## الدمج مع النظام الأساسي

يمكن دمج هذا النظام مع البرنامج الأساسي بإضافة:

### 1. إرسال تلقائي
```autohotkey
; في نهاية دورة العمل
if (AUTO_SEND_LOGS) {
    Run(A_ScriptDir "\send_logs_to_telegram.ahk")
}
```

### 2. زر في الواجهة
```autohotkey
; إضافة زر لإرسال السجلات
SendLogsBtn := Gui.Add("Button", "w100 h30", "إرسال السجلات")
SendLogsBtn.OnEvent("Click", (*) => Run(A_ScriptDir "\send_logs_to_telegram.ahk"))
```

### 3. إرسال عند الخطأ
```autohotkey
; إرسال السجلات عند حدوث خطأ حرج
if (CRITICAL_ERROR) {
    Run(A_ScriptDir "\send_logs_to_telegram.ahk")
}
```

## الدعم والمساعدة

إذا واجهت مشاكل:
1. شغل `test_telegram_logs.ahk` أولاً
2. تحقق من ملف `settings.ini`
3. تأكد من صحة بيانات Telegram
4. جرب إرسال رسالة يدوية للبوت للتأكد من عمله

---

**ملاحظة**: هذا النظام مصمم للاستخدام الشخصي وتحليل الأداء. تأكد من عدم إرسال معلومات حساسة عبر Telegram.